//students

var  studentList =[
    {
   "firstname": "Alex",
    "lastname": "Accarino",
   "website": "https://www.google.com/search?q=alex+accarino+dma+ucla"
}, {
    "firstname": "Alex",
    "lastname": "Madrid",
    "website": "https://www.google.com/search?q=alex+madrid+dma+ucla"
}, {
    "firstname": "Allek",
    "lastname": "Bien",
    "website": "https://www.google.com/search?q=allek+bien+dma+ucla"
}, {
    "firstname": "Anisa",
    "lastname": "Bashiri",
    "website": "https://www.google.com/search?q=anisa+bashiri+dma+ucla"
}, {
    "firstname": "Austin",
    "lastname": "Yu",
    "website": "https://www.google.com/search?q=austin+yu+dma+ucla"
}, {
    "firstname": "Chance",
    "lastname": "Wen",
    "website": "https://www.google.com/search?q=chance+wen+dma+ucla"
}, {
    "firstname": "Chen Cheng",
    "lastname": "Xiang",
    "website": "https://www.google.com/search?q=chen+cheng+xiang+dma+ucla"
    }, {
    "firstname": "Elena",
    "lastname": "Birgit Dick",
    "website": "https://www.google.com/search?q=elena+birgit+dick+dma+ucla"
}, {
    "firstname": "Erica",
    "lastname": "Young",
    "website": "https://www.google.com/search?q=erica+young+dma+ucla"
}, {
    "firstname": "Erika",
    "lastname": "Kehrwald",
    "website": "https://www.google.com/search?q=erica+kehrwald+dma+ucla"
}, {
    "firstname": "Evan",
    "lastname": "Berger",
    "website": "https://www.google.com/search?q=evan+berger+dma+ucla"
}, {
    "firstname": "Greta",
    "lastname": "Lorenz",
    "website": "https://www.google.com/search?q=greta+lorenz+dma+ucla"
}, {
    "firstname": "Hillary",
    "lastname": "Cleary",
    "website": "https://www.google.com/search?q=hillary+cleary+dma+ucla"
}, {
    "firstname": "Ho Man",
    "lastname": "Leung",
    "website": "https://www.google.com/search?q=ho+man+leung+dma+ucla"
}, {
    "firstname": "Hyesoo",
    "lastname": "Shin",
    "website": "https://www.google.com/search?q=hyesoo+shin+dma+ucla"
}, {
    "firstname": "Jake",
    "lastname": "Baylor",
    "website": "https://www.google.com/search?q=jake+baylor+dma+ucla"
}, {
    "firstname": "Jason",
    "lastname": "Farwell",
    "website": "https://www.google.com/search?q=jason+farwell+dma+ucla"
},{
    "firstname": "Jason",
    "lastname": "Spielman",
    "website": "https://www.google.com/search?q=jason+spielman+dma+ucla"
}, {
    "firstname": "Jennifer",
    "lastname": "Fletes-Galindo",
    "website": "https://www.google.com/search?q=jennifer+fletes-galindo+dma+ucla"
}, {
    "firstname": "Jessica",
    "lastname": "Rae Vergara",
    "website": "https://www.google.com/search?q=jessica+rae+vergara+dma+ucla"
}, {
    "firstname": "Jiamei",
    "lastname": "Deng",
    "website": "https://www.google.com/search?q=jiamei+deng+dma+ucla"
}, {
    "firstname": "Jordana",
    "lastname": "Attias",
    "website": "https://www.google.com/search?q=jordana+attias+dma+ucla"
},
    {
    "firstname": "Justin",
    "lastname": "Piotroski",
    "website": "https://www.google.com/search?q=justin+piotroski+dma+ucla"
},
    {
    "firstname": "Justine",
    "lastname": "Sto Thomas",
    "website": "https://www.google.com/search?q=justine+sto+thomas+dma+ucla"
}, {
    "firstname": "Kain",
    "lastname": "Suwannaphin",
    "website": "https://www.google.com/search?q=kain+suwannaphin+dma+ucla"
}, {
    "firstname": "Kayla",
    "lastname": "Eber",
    "website": "https://www.google.com/search?q=kayla+eber+dma+ucla"
}, {
    "firstname": "Kelly",
    "lastname": "Brennan",
    "website": "https://www.google.com/search?q=kelly+brennan+dma+ucla"
}, {
    "firstname": "Mac",
    "lastname": "Le",
    "website": "https://www.google.com/search?q=mac+le+dma+ucla"
}, {
    "firstname": "Maddie",
    "lastname": "Avjean",
    "website": "https://www.google.com/search?q=maddie+avjean+dma+ucla"
}, {
    "firstname": "Michael",
    "lastname": "Becker",
    "website": "https://www.google.com/search?q=michael+becker+dma+ucla"
}, {
    "firstname": "Nathan",
    "lastname": "Chan",
    "website": "https://www.google.com/search?q=nathan+chan+dma+ucla"
}, {
    "firstname": "Nathan",
    "lastname": "Dwarika",
    "website": "https://www.google.com/search?q=nathan+dwarika+dma+ucla"
}, {
    "firstname": "Noor",
    "lastname": "Euceph",
    "website": "https://www.google.com/search?q=noor+euceph+dma+ucla"
}, {
    "firstname": "Palmo",
    "lastname": "Farber",
    "website": "https://www.google.com/search?q=palmo+farber+dma+ucla"
}, {
    "firstname": "Peter",
    "lastname": "Ju",
    "website": "https://www.google.com/search?q=peter+ju+dma+ucla"
}, {
    "firstname": "Qiqi",
    "lastname": "Zuo",
    "website": "https://www.google.com/search?q=qiqi+zuo+dma+ucla"
}, {
    "firstname": "Rob Tom",
    "lastname": "Browning",
    "website": "https://www.google.com/search?q=rob+tom+browning+dma+ucla"
}, {
    "firstname": "Ryan",
    "lastname": "Thomas",
    "website": "https://www.google.com/search?q=ryan+thomas+dma+ucla"
}, {
    "firstname": "Sara",
    "lastname": "Haas",
    "website": "https://www.google.com/search?q=sara+haas+dma+ucla"
}, {
    "firstname": "Syd",
    "lastname": "Rein",
    "website": "https://www.google.com/search?q=syd+rein+dma+ucla"
}, {
    "firstname": "Tara",
    "lastname": "Dilloughery",
    "website": "https://www.google.com/search?q=tara+dilloughery+dma+ucla"
}, {
    "firstname": "Tiffany",
    "lastname": "Taimoorazy",
    "website": "https://www.google.com/search?q=tiffany+taimoorazy+dma+ucla"
}, {
    "firstname": "Vita",
    "lastname": "Newstetter",
    "website": "https://www.google.com/search?q=vita+newstetter+dma+ucla"
}, {
    "firstname": "Zichao",
    "lastname": "Xu",
    "website": "https://www.google.com/search?q=zichao+xu+dma+ucla"
}];

var selected = {id: null, url: '#'};
var studentSection = document.getElementById('student-section');
var __dirname ="/srprojects";

var toast = document.getElementById('toast');
var toastProfile = document.getElementById('toast-profile-image');
var toastDrop = document.getElementById('toast-drop-image');
var toastSender = document.getElementById('toast-sender');

var accept = document.getElementById('toast-accept');
var decline = document.getElementById('toast-decline');

//add image for each student
for(var i=0; i<studentList.length; i++){
    var fullname = studentList[i].firstname + " " + studentList[i].lastname;
    var urlname = fullname.replace(/\s+/g, '-').toLowerCase();

    var student = document.createElement('div');
    student.classList.add('student-profile');
    student.target = '_blank';
    student.id = i;

    var studentImg = document.createElement('img');
    studentImg.src = __dirname + '/assets/drops/'+ urlname + '-drop.png';

    var studentName = document.createElement('p');
    studentName.innerHTML = fullname;
    studentName.classList.add('student-name');

    student.appendChild(studentImg);
    student.appendChild(studentName);
    studentSection.appendChild(student);
}

var allStudents = document.querySelectorAll(".student-profile");

//handle click on student
for(var j = 0; j<allStudents.length; j++){
    allStudents[j].onclick = function(){
        //if no student is selected, have airdrop slide out
        if(selected.id == null){
            toast.style.opacity = '1';
            toast.style.right = '20px';

            selected.id = this.id;
            var fullname = studentList[selected.id].firstname + " " + studentList[selected.id].lastname;
            var urlname = fullname.replace(/\s+/g, '-').toLowerCase();

            toastDrop.src = __dirname + '/assets/drops/'+ urlname + '-drop.png';
            // toastDrop.src = __dirname + '/assets/profile/'+ urlname + '-drop.png';
            toastProfile.src = __dirname + '/assets/profile/allek-bien-profile.png';
            toastSender.innerHTML = 'from "' + fullname + '"';
            selected.url = studentList[selected.id].website;
        }else{
            //if a student is already selected, hide that popout, and slide out again with new student info
            toast.style.opacity = '0';
            toast.style.right = '-420px';
            selected.id = this.id;
            var fullname = studentList[selected.id].firstname + " " + studentList[selected.id].lastname;
            var urlname = fullname.replace(/\s+/g, '-').toLowerCase();

            //delay change until airdrop slides back onto screen
            setTimeout(function(){
                toast.style.opacity = '1';
                toast.style.right = '20px';

                toastDrop.src = __dirname + '/assets/drops/'+ urlname + '-drop.png';
                toastProfile.src = __dirname + '/assets/profile/'+ urlname + '-profile.png';
                toastSender.innerHTML = 'from "' + fullname + '"';
                selected.url = studentList[selected.id].website;
            }, 500);
        }
    }
}

accept.onclick =  function(){
    console.log(selected.url);
    window.open(selected.url, '_blank');
    toast.style.opacity = '1';
    toast.style.right = '-420px';
};

decline.onclick =  function(){
    selected.id = null;
    selected.url = '#';
    toast.style.opacity = '0';
    toast.style.right = '-420px';
};


